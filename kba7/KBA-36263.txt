Illegal Mix of Collations


Behavior:When upgrading DocuWare System utilizing MySQL databases there are times when you will run into the following error:Illegal mix of collations (utf8_general_ci,IMPLICIT) and (utf8_unicode_ci,IMPLICIT) for operation '='</message><exception>DocuWare.Common.Exceptions.DWDBException: Illegal mix of collations (utf8_general_ci,IMPLICIT) and (utf8_unicode_ci,IMPLICIT) for operation '='Typically, this error will occur during the Workflow Upgrader section due to previous versions having a different collation than we have now.***If you see this error, please DO NOT continue through the upgrader. Stop there and get assistance from DocuWare Support.***
Solution:This can be fixed by adjusting the collations and character sets used in the DocuWare database, which can either be done manually (which can be a lot of work) or with a MySQL Query:***Before making any changes, please ensure that you a backup of the DocuWare databases.***Open 'New Script Tab' in MySQL Query Browser,Paste, then execute the following script exactly as is: Convert Character Set to utf8_general_ciIf you receive any "do not exist" errors such as the one below, delete the line the corresponds to the error and hit execute again."Table 'dwsystem.dwbusinessusecase history' doesn't exist"Once the script has been run, go to the My.ini file located in the Internal Database folder. (Default location: C:\Program Files (x86)\DocuWare\Internal Database or Internal Database V2).***Make a backup of the My.ini file before continuing.***Search for "collation-server"Replace "utf8_unicode_ci" with utf8_general_ci"Save, then restart the MySQL database.You may now go back into the Upgrade and hit retry. The databases should now update smoothly.
KBA is applicable to On-Premise systems ONLY.
